(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{387:function(r,o,s){},401:function(r,o,s){"use strict";s(387)},414:function(r,o,s){"use strict";s.r(o);s(373),s(193);var e={computed:{user_info:function(){return this.$store.state.userInfo}},data:function(){var r=this,o=function(o,s,e){"confirmPassword"===o.field?s?s&&s!==r.form.password?e("两次输入的密码不一致"):e():e("请输入确认密码"):["password"].includes(o.field)&&(s?s&&r.form.confirmPassword&&s!==r.form.confirmPassword?e("两次输入的密码不一致"):e():e("请输入密码"))};return{rules:{password:{required:!0,validator:o},confirmPassword:{required:!0,validator:o}},formProcessing:!1,errors:[],form:{password:"",confirmPassword:""}}},methods:{getErrorForField:function(r,o){if(console.log(r,o),!o&&!o.length)return!1;var s=o.filter((function(o){return o.path[0]===r}));return s.length?s[0].message:void 0},changePsd:function(r,o){var s=this;o.preventDefault(),this.$refs[r].validate((function(r){if(!r)return!1;s.formProcessing=!0,s.$http.post("/changePassword",{password:s.form.password,id:s.user_info.id}).then((function(r){200==r.data.code?(s.$message({message:"密码修改成功",type:"success"}),localStorage.removeItem("token"),s.$store.commit("setIsLogged",!1),localStorage.removeItem("isLogged"),s.$store.commit("setUserInfo",{}),s.$router.push("/login")):s.$message({message:"密码修改失败",type:"error"})})).catch((function(r){}))}))}}},t=(s(401),s(2)),a=Object(t.a)(e,(function(){var r=this,o=r._self._c;return o("div",{staticClass:"main-container-body auth-container"},[o("div",{staticClass:"children"},[o("div",{staticClass:"forgot-password-container"},[o("div",{staticClass:"forgot-password col-md-6 col-sm-12"},[o("h1",{staticClass:"heading text-center mb-3"},[r._v("Change password")]),r._v(" "),o("el-form",{ref:"form",attrs:{model:r.form,rules:r.rules,"label-position":"top"}},[o("el-form-item",{staticClass:"form-group common",attrs:{prop:"password",error:r.getErrorForField("password",r.errors)}},[o("el-input",{ref:"loginInput",attrs:{placeholder:"Password",type:"password"},model:{value:r.form.password,callback:function(o){r.$set(r.form,"password",o)},expression:"form.password"}})],1),r._v(" "),o("el-form-item",{staticClass:"form-group common",attrs:{prop:"confirmPassword",error:r.getErrorForField("confirm-password",r.errors)}},[o("el-input",{ref:"loginInput",attrs:{placeholder:"Confirm password",type:"password"},model:{value:r.form.confirmPassword,callback:function(o){r.$set(r.form,"confirmPassword",o)},expression:"form.confirmPassword"}})],1),o("button",{staticClass:"btn btn-lg btn-success btn-block",attrs:{id:"email-login"},on:{click:function(o){return r.changePsd("form",o)}}},[r._v("change password")])],1)],1)])])])}),[],!1,null,"340be588",null);o.default=a.exports}}]);